@using Restaurant.Models
@model MenuItem
@inject Microsoft.AspNetCore.Antiforgery.IAntiforgery Antiforgery
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@{
    ViewData["Title"] = "Item Details";
}

<style>
    .details-container {
        padding: 2rem 0;
    }

    .page-title {
        text-align: center;
        margin-bottom: 3rem;
    }

        .page-title h1 {
            color: #2c3e50;
            font-weight: 700;
            font-size: 2.2rem;
            margin-bottom: 0.5rem;
        }

    .content-wrapper {
        background: white;
        border-radius: 12px;
        padding: 2rem;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    }

    /* Image Section */
    .image-section {
        display: flex;
        justify-content: center;
        align-items: center;
        background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%);
        border-radius: 12px;
        padding: 2rem;
        min-height: 450px;
    }

    .product-image {
        max-width: 100%;
        max-height: 400px;
        border-radius: 10px;
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
        object-fit: cover;
        transition: transform 0.3s ease;
    }

        .product-image:hover {
            transform: scale(1.05);
        }

    /* Details Section */
    .details-section {
        padding: 1rem;
    }

    .product-name {
        color: #2c3e50;
        font-weight: 700;
        font-size: 2rem;
        margin-bottom: 1.5rem;
    }

    .product-meta {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 1.5rem;
        padding-bottom: 1.5rem;
        border-bottom: 2px solid #ecf0f1;
    }

    .prep-time {
        background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 6px;
        font-weight: 600;
        font-size: 0.9rem;
    }

    .price-section {
        margin-bottom: 1.5rem;
    }

    .current-price {
        font-size: 2.2rem;
        font-weight: 700;
        color: #27ae60;
        margin-bottom: 0.5rem;
    }

    .original-price {
        color: #95a5a6;
        text-decoration: line-through;
        font-size: 1.1rem;
    }

    .category-badge {
        display: inline-block;
        background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        color: white;
        padding: 0.6rem 1.2rem;
        border-radius: 8px;
        font-weight: 600;
        margin-bottom: 1.5rem;
        font-size: 0.9rem;
    }

    .rating-section {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 2rem;
    }

    .stars {
        display: flex;
        gap: 0.3rem;
        font-size: 1.2rem;
    }

    .star-filled {
        color: #f39c12;
    }

    .star-half {
        color: #f39c12;
        position: relative;
    }

    .rating-text {
        color: #2c3e50;
        font-weight: 600;
    }

    .rating-count {
        color: #7f8c8d;
        font-size: 0.95rem;
    }

    /* Buttons */
    .button-group {
        display: flex;
        gap: 1rem;
        margin-top: 2rem;
    }

    .btn-back {
        flex: 1;
        padding: 1rem 1.5rem;
        background: #95a5a6;
        color: white;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
    }

        .btn-back:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(149, 165, 166, 0.3);
            background: #7f8c8d;
            color: white;
        }

    .btn-add-cart {
        flex: 1;
        padding: 1rem 1.5rem;
        background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
        color: white;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s ease;
    }

        .btn-add-cart:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(39, 174, 96, 0.3);
            background: linear-gradient(135deg, #229954 0%, #1e8449 100%);
        }

    /* Responsive */
  
  

    .content-wrapper {
        animation: slideDown 0.6s ease;
    }

    /* Description */
    .description-section {
        background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%);
        border-radius: 12px;
        padding: 1.5rem;
        margin-top: 2rem;
        border-left: 4px solid #e74c3c;
    }

    .description-title {
        color: #2c3e50;
        font-weight: 600;
        margin-bottom: 1rem;
        font-size: 1.1rem;
    }

    .description-text {
        color: #555;
        line-height: 1.6;
    }
</style>

<div class="details-container">
    <div class="page-title">
        <h1>Item Details</h1>
    </div>

    <div class="content-wrapper">
        <div class="row g-4">
            <!-- Image Section -->
            <div class="col-12 col-lg-6">
                <div class="image-section">
                    <img src="@Model.ImageUrl" alt="@Model.Name" class="product-image" id="mainImage">
                </div>
            </div>

            <!-- Details Section -->
            <div class="col-12 col-lg-6">
                <div class="details-section">
                    <h2 class="product-name">@Model.Name</h2>

                    <div class="product-meta">
                        <span class="prep-time">⏱️ @Model.PreparationTime minutes</span>
                    </div>

                    <div class="category-badge">
                        @Model?.Category?.Name
                    </div>

                    <div class="price-section">
                        <div class="current-price">$@Model.Price</div>
                        <div class="original-price">$@(Model.Price) * 1.2)</div>
                    </div>

                    <div class="rating-section">
                        <div class="stars">
                            <span class="star-filled">★</span>
                            <span class="star-filled">★</span>
                            <span class="star-filled">★</span>
                            <span class="star-filled">★</span>
                            <span class="star-half">★</span>
                        </div>
                        <div>
                            <div class="rating-text">4.5 Stars</div>
                            <div class="rating-count">(120 reviews)</div>
                        </div>
                    </div>

                    <div class="button-group">
                        <a class="btn-back" href="javascript:history.back()">Back</a>
                        
                        <button class="btn-add-cart" onclick="addToCart(@Model.Id)">
                            Add to Cart
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Description Section -->
        <div class="description-section">
            <div class="description-title">About This Item</div>
            <p class="description-text">
                This delicious menu item is carefully prepared with premium ingredients to deliver an exceptional dining experience.
                Prepared fresh to order with attention to detail, ensuring quality and taste in every bite.
            </p>
        </div>
    </div>
</div>

<script>
    function addToCart(menuItemId) {
        fetch('/OrderItem/AddToCart?menuItemId=' + menuItemId, {
            method: 'POST',
            headers: {
                'RequestVerificationToken': '@Antiforgery.GetAndStoreTokens(HttpContextAccessor.HttpContext).RequestToken'
            }
        }).then(response => {
            if (response.redirected) {
                window.location.href = response.url;
            } else {
                alert("Item added to cart successfully!");
            }
        }).catch(error => {
            console.error('Error:', error);
            alert("Failed to add item to cart");
        });
    }
</script>